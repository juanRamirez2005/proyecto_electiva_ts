<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Historial de Empleados</title>
  <link rel="stylesheet" href="../styles/recepcion.css" />
  <link rel="icon" type="image/svg" href="../assets/icon.svg">
</head>

<body>
  <div class="page-container">
    <!-- Main -->
    <main class="main">
      <section>
        <nav class="navegation">
          <a href="./home.html">Home</a>
          <a href="./recepcion.html">Recepci√≥n</a>
          <a href="./procesamiento.html">Procesamiento</a>
          <a href="./despacho.html">Despacho</a>
          <a href="./horarios.html">Horarios</a>
          <a href="./empleados.html">Empleados</a>
        </nav>
      </section>

      <section>
        <div class="container" role="main">
          <h1>Historial de Acciones de Empleados</h1>
          <p class="lead">
            Consulta el historial de actividades y acciones realizadas por cada empleado.
          </p>

          <div id="historialForm" novalidate>
            <!-- SECCI√ìN FILTROS -->
            <section class="section" aria-labelledby="filtrosTitle">
              <h2 id="filtrosTitle">1. Filtros de B√∫squeda</h2>
              <div class="grid">
                <div class="field-row">
                  <label for="empleadoFiltro">Empleado</label>
                  <select id="empleadoFiltro" name="empleadoFiltro">
                    <option value="">-- Todos los empleados --</option>
                    <option value="maria">üë©‚Äçüç≥ Mar√≠a Garc√≠a - Chef Principal</option>
                    <option value="carlos">üë®‚Äçüç≥ Carlos L√≥pez - Chef Especialista</option>
                    <option value="ana">üë©‚Äçüíº Ana Rodr√≠guez - Supervisora</option>
                    <option value="luis">üë®‚Äçüíº Luis Mart√≠nez - Coordinador</option>
                    <option value="sofia">üë©‚Äçüé® Sof√≠a Herrera - Decoradora</option>
                  </select>
                </div>

                <div class="field-row">
                  <label for="tipoAccion">Tipo de Acci√≥n</label>
                  <select id="tipoAccion" name="tipoAccion">
                    <option value="">-- Todas las acciones --</option>
                    <option value="procesamiento">Procesamiento de Pedidos</option>
                    <option value="entrega">Entrega de Pedidos</option>
                    <option value="configuracion">Configuraci√≥n</option>
                    <option value="login">Inicio de Sesi√≥n</option>
                    <option value="error">Errores</option>
                  </select>
                </div>

                <div class="field-row">
                  <label for="fechaDesde">Fecha desde</label>
                  <input id="fechaDesde" name="fechaDesde" type="date" />
                </div>

                <div class="field-row">
                  <label for="fechaHasta">Fecha hasta</label>
                  <input id="fechaHasta" name="fechaHasta" type="date" />
                </div>

                <div class="field-row">
                  <label for="busquedaTexto">B√∫squeda por texto</label>
                  <input id="busquedaTexto" name="busquedaTexto" type="text" placeholder="Buscar en descripci√≥n..." />
                </div>

                <div class="field-row">
                  <div class="button-container">
                    <button type="button" class="primary" onclick="aplicarFiltros()">Aplicar Filtros</button>
                    <button type="button" class="ghost" onclick="limpiarFiltros()">Limpiar</button>
                    <button type="button" class="ghost" onclick="exportarHistorial()">Exportar</button>
                  </div>
                </div>
              </div>
            </section>

            <!-- SECCI√ìN RESUMEN -->
            <section class="section" aria-labelledby="resumenTitle">
              <h2 id="resumenTitle">2. Resumen de Actividad</h2>
              <div class="resumen-grid">
                <div class="resumen-card">
                  <div class="resumen-icon">üìä</div>
                  <div class="resumen-content">
                    <h3>Total de Acciones</h3>
                    <p id="totalAcciones">0</p>
                  </div>
                </div>
                <div class="resumen-card">
                  <div class="resumen-icon">üë•</div>
                  <div class="resumen-content">
                    <h3>Empleados Activos</h3>
                    <p id="empleadosActivos">0</p>
                  </div>
                </div>
                <div class="resumen-card">
                  <div class="resumen-icon">‚úÖ</div>
                  <div class="resumen-content">
                    <h3>Acciones Exitosas</h3>
                    <p id="accionesExitosas">0</p>
                  </div>
                </div>
                <div class="resumen-card">
                  <div class="resumen-icon">‚ùå</div>
                  <div class="resumen-content">
                    <h3>Errores</h3>
                    <p id="totalErrores">0</p>
                  </div>
                </div>
              </div>
            </section>

            <!-- SECCI√ìN HISTORIAL -->
            <section class="section" aria-labelledby="historialTitle">
              <h2 id="historialTitle">3. Historial de Acciones</h2>
              
              <!-- CONTROLES DE PAGINACI√ìN -->
              <div class="historial-controls">
                <div class="pagination-info">
                  <span id="paginationInfo">Mostrando 0 de 0 acciones</span>
                </div>
                <div class="pagination-controls">
                  <button type="button" class="btn-pagination" onclick="cambiarPagina(-1)" id="btnAnterior" disabled>‚Üê Anterior</button>
                  <span id="paginaActual">1</span>
                  <button type="button" class="btn-pagination" onclick="cambiarPagina(1)" id="btnSiguiente" disabled>Siguiente ‚Üí</button>
                </div>
              </div>

              <!-- LISTA DE ACCIONES -->
              <div class="historial-lista" id="historialLista">
                <!-- Las acciones se cargar√°n din√°micamente aqu√≠ -->
              </div>

              <!-- PLANTILLA DE ACCI√ìN (oculta) -->
              <template id="accionTemplate">
                <div class="accion-item">
                  <div class="accion-header">
                    <div class="accion-empleado">
                      <div class="empleado-avatar" id="accionAvatar">üë§</div>
                      <div class="empleado-info">
                        <h4 id="accionNombre">Nombre Empleado</h4>
                        <p id="accionCargo">Cargo</p>
                      </div>
                    </div>
                    <div class="accion-meta">
                      <span class="accion-fecha" id="accionFecha">2024-01-15</span>
                      <span class="accion-hora" id="accionHora">14:30</span>
                    </div>
                  </div>
                  <div class="accion-content">
                    <div class="accion-tipo">
                      <span class="tipo-badge" id="accionTipo">Procesamiento</span>
                      <span class="estado-badge" id="accionEstado">Exitoso</span>
                    </div>
                    <div class="accion-descripcion">
                      <h5>Descripci√≥n:</h5>
                      <p id="accionDescripcion">Descripci√≥n de la acci√≥n realizada...</p>
                    </div>
                    <div class="accion-detalles" id="accionDetalles" style="display: none;">
                      <h5>Detalles:</h5>
                      <div class="detalles-content" id="detallesContent">
                        <!-- Detalles espec√≠ficos de la acci√≥n -->
                      </div>
                    </div>
                    <div class="accion-actions">
                      <button type="button" class="btn-detalles" onclick="toggleDetalles(this)">Ver Detalles</button>
                      <button type="button" class="btn-exportar" onclick="exportarAccion(this)">Exportar</button>
                    </div>
                  </div>
                </div>
              </template>
            </section>

            <!-- SECCI√ìN ESTAD√çSTICAS -->
            <section class="section" aria-labelledby="estadisticasTitle">
              <h2 id="estadisticasTitle">4. Estad√≠sticas por Empleado</h2>
              <div class="estadisticas-grid" id="estadisticasGrid">
                <!-- Las estad√≠sticas se cargar√°n din√°micamente aqu√≠ -->
              </div>
            </section>

            <!-- SECCI√ìN ACCIONES -->
            <section class="section">
              <div class="actions">
                <div class="summary" id="resumenHistorial" aria-live="polite">
                  Historial cargado. Usa los filtros para buscar acciones espec√≠ficas.
                </div>
                <div style="display: flex; gap: 8px; margin-left: 12px">
                  <button type="button" class="ghost" onclick="limpiarFiltros()">Limpiar Filtros</button>
                  <button type="button" class="ghost" onclick="generarReporte()">Generar Reporte</button>
                  <button type="button" class="primary" onclick="actualizarHistorial()">Actualizar</button>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="../js/historial.js" type="module"></script>
  <script src="../js/autoreload.js"></script>
</body>

</html>
